## This Week's Progress
### **TODO**
- [x] Fix a bug in the `distanceBetween` function
- [x] Test with larger datasets to ensure performance and memory usage are acceptable. 
- [ ] Debug `distanceBetween` function (remove loops)
- [ ] Debug `distanceBetween` function (get the shortest distance)
- [ ] Create a comprehensive set of test data.
- [ ] Implement MLP.
---
### **Fixed a bug in the `distanceBetween` function**

**Issue:**  
When calculating the distance between two nodes (e.g., `"ç›®"` and `"æ¯›"`), the computation did not terminate and resulted in `exit status 137`.

**Cause:**  
The `.edges` file contained self-referencing edges (i.e., lines where the parent and child were identical), which led to an infinite loop during tree traversal.

**Fix:**  
Added logic in the `loadEdges` function to filter out self-loop entries during edge loading.

```haskell
loadEdges :: 
  FilePath -> -- path to the edges file
  IO [(String, String)] -- load edges from the file
loadEdges path = do
  contents <- readFile path
  let pairs = map parseEdge (filter (not . null) (lines contents))
      filteredPairs = filter (\(p, c) -> p /= c) pairs  -- filter out self-loops
  return filteredPairs
```

**Result:**
With a dataset of 10,000 lines:    

Before the fix:
```haskell
exit status 137
```

After the fix:
```haskell
Path A: entity -> é•·æ‰€ -> åˆ©å·§ -> è°æ˜ -> è£ã -> ç›®
Path B: entity -> é¬¢ -> æ¯›
Distance between ç›® and æ¯›: 7


Path A: entity -> è‰² -> å¥³
Path B: entity -> ç¹‹åˆã›ã‚‹ -> ä»˜ç€ -> è²¼ã‚‹
Distance between å¥³ and è²¼ã‚‹: 5
```

### Trying with a Larger Dataset

There were redundant entries in the `.edges` data due to duplicates, so I modified the `saveTreeAsEdgeList` function.

I loaded the first 40,000 rows to construct the tree and saved that information into `.edges`.
â†’ 31,905 pairs exist.

This time, I want to check whether the distanceBetween function works correctly with 40,000 rows, and how long it takes to run.

Some pairs occasionally fail to work:
```
  let nodeA = "è²¼ã‚‹"
      nodeB = "é€šé"
```
Manually tracing the nodes:
```
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ â†’ è²¿æ˜“ â†’ å–å› â†’ entity 
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ â†’ è²¿æ˜“ã€€â†’ å‡ºæ¥é«˜ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é‹è¼¸ â†’ ç§»è»¢ â†’ å¤‰æ˜“ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é‹è¼¸ â†’ ç§»è»¢ â†’ é‹è¼¸
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ å–ã£ã¦ãã‚‹
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ æŒã£ã¦æ¥ã‚‹ â†’ é€é…
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ æŒã£ã¦æ¥ã‚‹ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ â†’ è²¿æ˜“ â†’ å–å› â†’ entity 
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ æŒã£ã¦æ¥ã‚‹ â†’ é‹è¼¸ â†’ å®Ÿæ¥­  â†’ è²¿æ˜“ã€€â†’ å‡ºæ¥é«˜ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ æŒã£ã¦æ¥ã‚‹ â†’ é‹è¼¸ â†’ ç§»è»¢ â†’ å¤‰æ˜“ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ æŒã£ã¦æ¥ã‚‹ â†’ é‹è¼¸ â†’ ç§»è»¢ â†’ é‹è¼¸
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ æŒã£ã¦æ¥ã‚‹ â†’ é‹è¼¸ â†’ é€é… â†’ â€¦..
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ ç§»è»¢ â†’ å¤‰æ˜“ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ ç§»è»¢ â†’ é‹è¼¸ â†’ ç§»è»¢
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ ç§»è»¢ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ â†’ è²¿æ˜“ â†’ å–å› â†’ entity 
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ å–ã£ã¦ãã‚‹ â†’ é€é…â†’ ç§»è»¢ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ â†’ è²¿æ˜“ã€€â†’ å‡ºæ¥é«˜ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ æŒã£ã¦ãã‚‹
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ã€€â†’ è²¿æ˜“ â†’ å–å› â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ é‹è¼¸ â†’ å®Ÿæ¥­ã€€â†’ è²¿æ˜“ â†’ å‡ºæ¥é«˜ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ é‹è¼¸ â†’ ç§»è»¢ â†’ å¤‰æ˜“ â†’ entity
é€šé â†’ é€šè¡Œã€€ â†’ é…é€ â†’ é‹è¼¸ â†’ ç§»è»¢ â†’ é‹è¼¸
```

It turns out **there is a loop!**   

ğŸŒŸ The distanceBetween function needs to be fixed to account for this.   
ğŸŒŸ The function currently **returns the first found path, not the shortest path**, so that needs to be corrected as well.




